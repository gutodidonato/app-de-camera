<!DOCTYPE html>
<html>
  <head>
    <title>Camera com Vídeo Animado</title>
    <style>
      video {
        width: 100vw;
      }
      canvas {
        width: 100vw;
      }
    </style>
  </head>
  <body>
    <video id="camera-view" autoplay loop muted="" controls></video>
    <video id="animated-video" autoplay loop muted="">
      <source src="/videoplayback.mp4" type="video/mp4" />
    </video>
    <canvas id="canvas"></canvas>

    <script>
      var cameraVideo = document.getElementById("camera-view");
      var animatedVideo = document.getElementById("animated-video");
      var canvas = document.getElementById("canvas");
      var context = canvas.getContext("2d");

      navigator.mediaDevices
        .getUserMedia({ video: true })
        .then(function (stream) {
          cameraVideo.srcObject = stream;
        })
        .catch(function (error) {
          console.error("Erro ao acessar a câmera: ", error);
        });

      function renderFrame() {
        context.drawImage(cameraVideo, 0, 0, canvas.width, canvas.height);
        context.globalAlpha = 0.4;
        context.drawImage(animatedVideo, 0, 0, canvas.width, canvas.height);
        requestAnimationFrame(renderFrame);
      }

      animatedVideo.onplay = function () {
        renderFrame();
      };
    </script>
  </body>
</html>
